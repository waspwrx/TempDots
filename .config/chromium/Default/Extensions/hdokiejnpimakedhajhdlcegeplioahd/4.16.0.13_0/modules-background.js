var LPModule,__decorate=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();!function(e){setTimeout(function(){e.initialize(),e.postInitialize()})}(LPModule||(LPModule={})),function(e){var t;(t=e.FeatureType||(e.FeatureType={})).NewSaveSite="new_save_site",t.WebRequestTracking="webreq_tracking",t.Ziggy="ziggy",t.Freamon="freamon",t.BetterGeneratePasswordEnabled="better_generate_password_enabled",t.IsInfieldEnabled="is_infield_enabled",t.IsMobileActive="is_mobile_active",t.OmarIa="omaria",t.EzpassControl="ezpass_control",t.EzpassTest="ezpass_test",t.FormfillMigration="formfill_migration",t.AngularFrontendEnabled="angularFrontendEnabled",t.FamilyLegacySharedFoldersEnabled="family_legacy_shared_folders_enabled",t.FamilySharedFoldersEnabled="family_shared_folders_enabled",t.FamiliesEnabled="families_enabled",t.TryFamiliesEnabled="try_families_enabled",t.OmarDrawer="omardrawer",t.OmarInfieldB="omar_infield_b",t.OmarInfieldC="omar_infield_c",t.IsDogfood="isDogfood",t.OneToOneSharingRestricted="one_to_one_sharing_restricted",t.EmergencyAccessRestricted="emergency_access_restricted",t.TutorialEnabled="tutorial_enabled",t.HealthMonitoring="health_monitoring",t.ICOB="icob"}(LPModule||(LPModule={})),function(e){(e.RepositoryType||(e.RepositoryType={})).Feature="Feature"}(LPModule||(LPModule={})),function(e){var t;(t=e.ServiceType||(e.ServiceType={})).BasicAuth="BasicAuth",t.ContentScriptTools="ContentScriptTools",t.FormDetection="FormDetection",t.FormParser="FormParser",t.Segment="Segment",t.SiteParser="SiteParser",t.StringUtils="StringUtils",t.Topic="Topic",t.WebRequest="WebRequest"}(LPModule||(LPModule={})),function(e){var t;(t=e.TopicType||(e.TopicType={}))[t.LoginFinished=Topics.LOGIN_FINISHED]="LoginFinished",t[t.ClearData=Topics.CLEAR_DATA]="ClearData"}(LPModule||(LPModule={})),function(e){var t=new(function(){function e(){this.constructors={},this.repositories={}}return e.prototype.register=function(e,t){this.constructors[e]=t},e.prototype.initialize=function(){var e=this;Object.keys(this.constructors).forEach(function(t){return e.repositories[t]=new e.constructors[t]}),Object.keys(this.repositories).forEach(function(t){return e.repositories[t].initialize()})},e.prototype.getRepository=function(e){return this.repositories[e]},e}());e.getRepository=function(e){var r=t.getRepository(e);if(!r)throw new Error("Cannot find repository [ "+e+" ]");return r},function(e){e.initialize=function(){t.initialize()},e.register=function(e,r){t.register(e,r)}}(e.Repositories||(e.Repositories={}))}(LPModule||(LPModule={})),function(e){var t=new(function(){function e(){this.constructors={},this.services={}}return e.prototype.register=function(e,t){this.constructors[e]=t},e.prototype.initialize=function(){var e=this;Object.keys(this.constructors).forEach(function(t){return e.services[t]=new e.constructors[t]}),Object.keys(this.services).forEach(function(t){return e.services[t].initialize()})},e.prototype.getService=function(e){return this.services[e]},e}());e.getService=function(e){var r=t.getService(e);if(!r)throw new Error("Cannot find service [ "+e+" ]");return r},function(e){e.initialize=function(){t.initialize()},e.register=function(e,r){t.register(e,r)}}(e.Services||(e.Services={}))}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.Utils||(t.Utils={}),i=function(){function e(){}return e.prototype.initialize=function(){},e.prototype.stringContains=function(e,t){if(e&&t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;++r)if(e.indexOf(t[r])>-1)return!0}return!1},e}(),r.StringUtilsService=i,t.register(e.ServiceType.StringUtils,i)}(LPModule||(LPModule={})),function(e){e.initialize=function(){e.Repositories.initialize(),e.Services.initialize()},e.postInitialize=function(){e.Services.postInitialize()},function(e){var t=new WeakMap;function r(e,t){if("function"==typeof t){t(e instanceof Error||"string"==typeof e.message?e.message:"function"==typeof e.toString?e.toString():"Unknown error")}else console.error(e)}e.addVisibleMethod=function(e,r){var i=e.constructor,n=t.get(i);n&&n.size?n.add(r):n=new Set([r]),t.set(i,n)},e.callMethod=function(e,i,n,o){void 0===n&&(n=[]);try{if(!e||!e.constructor)throw new Error("No target provided!");if(!t.has(e.constructor))throw new Error("Target has no visible methods.");if(!t.get(e.constructor).has(i))throw new Error("Method [ "+i+" ] is not a visible method.");var s=e[i];if("function"!=typeof s)throw new Error("Method [ "+i+" ] is not a function or does not exist on the target.");var a=s.bind(e).apply(void 0,n);a&&"function"==typeof a.then?a.then(function(e){return o(null,e)}).catch(function(e){throw e}):o(null,a)}catch(e){r(e,o)}},e.handleCallbackError=r}(e.Background||(e.Background={}))}(LPModule||(LPModule={})),function(e){e.Visible=function(t,r,i){e.Background.addVisibleMethod(t,r)}}(LPModule||(LPModule={})),function(e){!function(t){(e.Repositories||(e.Repositories={})).call=function(t,r,i,n){void 0===i&&(i=[]);try{e.Background.callMethod(e.getRepository(t),r,i,n)}catch(t){n?n(t):e.Background.handleCallbackError(t,n)}}}()}(LPModule||(LPModule={})),function(e){var t,r;t=e.Repositories||(e.Repositories={}),r=function(){function t(){}return t.prototype.initialize=function(){},t.prototype.get=function(e){return LPContentScriptFeatures[e]},t.prototype.set=function(e,t){LPContentScriptFeatures[e]=t},__decorate([e.Visible],t.prototype,"get",null),__decorate([e.Visible],t.prototype,"set",null),t}(),t.FeatureRepository=r,t.register(e.RepositoryType.Feature,r)}(LPModule||(LPModule={})),function(e){!function(t){t.postInitialize=function(){window.basicAuth=e.getService(e.ServiceType.BasicAuth)},t.call=function(t,r,i,n){void 0===i&&(i=[]);try{e.Background.callMethod(e.getService(t),r,i,n)}catch(t){e.Background.handleCallbackError(t,n)}}}(e.Services||(e.Services={}))}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.BasicAuth||(t.BasicAuth={}),i=function(e,t,r,i){void 0===t&&(t=""),void 0===r&&(r=""),void 0===i&&(i=!1),this.url=e,this.userName=t,this.password=r,this.suppliedBefore=i,this.cancelled=!1},r.AuthCredential=i}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.BasicAuth||(t.BasicAuth={}),i=function(){function e(){this.authCredentials={}}return e.prototype.initialize=function(){this.subscribeEvents()},e.prototype.subscribeEvents=function(){var e=this;LPPlatform.onAuthRequired(function(t,i){if(g_basicauth_feature_enabled&&"basic"===t.scheme){var n=e.authCredentials[t.tabId];if(n&&!n.cancelled&&!n.suppliedBefore)return e.authCredentials[t.tabId]=new r.AuthCredential(t.url,n.userName,n.password,!0),e.removeAuth(i),{authCredentials:{username:n.userName,password:n.password}};if(!n)return e.authCredentials[t.tabId]=new r.AuthCredential(t.url),{cancel:!0}}}),LPPlatform.onTabClosed(function(t){e.removeAuth(t)})},e.prototype.removeAuth=function(e){this.authCredentials[e]&&delete this.authCredentials[e]},e.prototype.isBasicAuth=function(e,t){var r=this.authCredentials[t.tabID];if(r){if(r.url!==t.tabURL)return e(!1,!1),void this.removeAuth(t.tabID);if(!r.cancelled)return void e(!0,r.suppliedBefore)}e(!1,!1)},e.prototype.setAuthCredential=function(e,t,r,i){var n=this.authCredentials[i.tabID];n.userName=e,n.password=t,r()},e.prototype.cancelBasicAuth=function(e){this.authCredentials[e.tabID]&&(this.authCredentials[e.tabID].cancelled=!0)},e.prototype.hasFeature=function(e){e(!0)},e.prototype.isNotificationClosed=function(e){e("closed"===localStorage_getItem("basicAuthPopupState"))},e.prototype.closeNotification=function(){localStorage_setItem("basicAuthPopupState","closed")},e}(),r.BasicAuthService=i,t.register(e.ServiceType.BasicAuth,i)}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=function(){function e(e){var t=this;this.passwordsByValue={},this.textFieldsByValue={},this.textFieldsByType={},this.uniqueTextValues=[],this.uniquePasswords=[],e.fields&&(e.fields.forEach(function(e){"password"===e.type?t.aggregateField(e,e.value,t.passwordsByValue):(t.aggregateField(e,e.value,t.textFieldsByValue),t.aggregateField(e,e.type,t.textFieldsByType))}),this.uniqueTextValues=Object.keys(this.textFieldsByValue),this.uniquePasswords=Object.keys(this.passwordsByValue))}return e.prototype.aggregateField=function(e,t,r){var i=r[t];i?++i.count:r[t]={field:e,count:1}},e}(),r.FormMetaData=i}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=function(){function e(){}return e.prototype.initialize=function(){},e.prototype.parse=function(e,t,i){return new r.ParsedForm(e,t,i)},e}(),r.FormParserService=i,t.register(e.ServiceType.FormParser,i)}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=function(){function t(t,i,n){this.formData=null,this.userNameField=null,this._succeeded=!1,this._submitted=!1;var o=e.getService(e.ServiceType.SiteParser);i.fields=i.fields||[];var s=new r.FormMetaData(i);if(!i.password)if(i.generatedPassword)i.password=i.generatedPassword;else{var a=(new r.FieldParsers.PasswordFieldParser).parse(i,s,t);"string"==typeof a&&(i.password=a)}var u=new r.FieldParsers.UserNameFieldParser(n&&n.strict).parse(i,s,t),c=[];if("string"==typeof u&&(c=t.getSites().filter(function(e){return o.hasMatchingSiteUserName(e,u)}),i.username&&0===c.length&&!i.createAccountForm||(i.username=u)),i.username&&!i.createAccountForm)for(var l=0,d=i.fields;l<d.length;l++){var p=d[l];if(p.value===i.username){this.userNameField=p;break}}this.formData=i,this._submitted=!i.generatedPassword}return t.prototype.submitted=function(e){return"boolean"==typeof e&&(this._submitted=e),this._submitted},t.prototype.succeeded=function(e){return"boolean"==typeof e&&(this._succeeded=e),this._succeeded},t.prototype.getUsernameField=function(){return this.userNameField},t.prototype.getUsername=function(){return this.formData.username},t.prototype.getPassword=function(){return this.formData.password},t.prototype.getOriginalPassword=function(){return this.formData.originalPassword},t.prototype.getFormData=function(){return this.formData},t.prototype.getFields=function(){return this.formData.fields},t.prototype.isChangePasswordForm=function(){return!!this.formData.passwordChangeForm},t.prototype.isCreateAccountForm=function(){return!!this.formData.passwordChangeForm},t.prototype.isBasicAuthentication=function(){return!!this.formData.basicAuthentication},t.prototype.shouldSaveFields=function(){return!this.isChangePasswordForm()&&!this.isCreateAccountForm()},t.prototype.getURL=function(){return this.formData.url},t}(),r.ParsedForm=i}(LPModule||(LPModule={})),function(e){var t,r,i,n;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=r.FieldParsers||(r.FieldParsers={}),n=function(){function e(){this.operations=[]}return e.regexMatches=function(e,t){var r=!1;if(e){var i=function(e,t){return"string"==typeof t&&e.test(t.toLowerCase())};Array.isArray(t)?t.forEach(function(t){return r=r||i(e,t)}):r=i(e,t)}return r},e.getFormFieldRegex=function(e){var t=get_ff_translation(e);if(t)return new RegExp(t)},e.prototype.parse=function(e,t,r){for(var i=null,n=0,o=this.operations;n<o.length&&!(i=(0,o[n])(e,t,r))&&!1!==i;n++);return i},e}(),i.FieldParserAbstract=n}(LPModule||(LPModule={})),function(e){var t,r,i,n;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=r.FieldParsers||(r.FieldParsers={}),n=function(t){function r(){var n=t.call(this)||this;return n.stringUtils=e.getService(e.ServiceType.StringUtils),n.siteParser=e.getService(e.ServiceType.SiteParser),r.excludedFields.length||(r.excludedFields=[{type:"attr",regex:i.FieldParserAbstract.getFormFieldRegex("ff_ssn_regexp")},{type:"attr",regex:i.FieldParserAbstract.getFormFieldRegex("ff_cccsc_regexp")},{type:"attr",regex:i.FieldParserAbstract.getFormFieldRegex("ff_securityanswer_regexp")},{type:"attr",regex:i.FieldParserAbstract.getFormFieldRegex("ff_captcha_regexp")},{type:"text",regex:i.FieldParserAbstract.getFormFieldRegex("ff_text_ssn_regexp")},{type:"text",regex:i.FieldParserAbstract.getFormFieldRegex("ff_text_cccsc_regexp")}]),n.operations=[n.excludedFieldOperation,n.singlePasswordFieldOperation,n.multiplePasswordOperation,n.multiplePasswordsOneExistingOperation,n.passwordLikeAttribute],n.operations=n.operations.map(function(e){return e.bind(n)}),n}return __extends(r,t),r.prototype.excludedFieldOperation=function(e,t,n){for(var o=0;o<e.fields.length;++o)for(var s=e.fields[o],a=0;a<r.excludedFields.length;++a){var u=r.excludedFields[a];if(u.regex){if("attr"===u.type&&i.FieldParserAbstract.regexMatches(u.regex,[s.id,s.attributes.name]))return!1;if("text"===u.type&&i.FieldParserAbstract.regexMatches(u.regex,s.label))return!1}}return null},r.prototype.singlePasswordFieldOperation=function(e,t,r){if(1===t.uniquePasswords.length){var i=t.uniquePasswords[0];return 2===t.passwordsByValue[i].count&&(2===e.fields.length?e.passwordChangeForm=!0:e.createAccountForm=!0),i}return null},r.prototype.multiplePasswordOperation=function(e,t,r){for(var i=0,n=t.uniquePasswords;i<n.length;i++){var o=n[i];if(t.passwordsByValue[o].count>1)return 2===t.uniquePasswords.length?(e.passwordChangeForm=!0,e.originalPassword=t.uniquePasswords[0]===o?t.uniquePasswords[1]:t.uniquePasswords[0]):e.createAccountForm=!0,o}return null},r.prototype.multiplePasswordsOneExistingOperation=function(e,t,r){if(2===t.uniquePasswords.length){var i=this.findMatchingPassword(r.getSites(),t.uniquePasswords);if(i)return e.passwordChangeForm=!0,e.originalPassword=i,t.uniquePasswords[0]===i?t.uniquePasswords[1]:t.uniquePasswords[0]}return null},r.prototype.passwordLikeAttribute=function(e,t,r){for(var i=0,n=t.uniquePasswords;i<n.length;i++){var o=n[i],s=t.passwordsByValue[o].field,a=["pw","pass"];if(this.stringUtils.stringContains(s.attributes.name,a)||this.stringUtils.stringContains(s.id,a))return o}},r.prototype.findMatchingPassword=function(e,t){for(var r=0;r<e.length;++r){var i=this.siteParser.findMatchingSitePassword(e[r],t);if(i)return i}return null},r.excludedFields=[],r}(i.FieldParserAbstract),i.PasswordFieldParser=n}(LPModule||(LPModule={})),function(e){var t,r,i,n;t=e.Services||(e.Services={}),r=t.FormParser||(t.FormParser={}),i=r.FieldParsers||(r.FieldParsers={}),n=function(t){function r(r){var n=t.call(this)||this;return n.isStrict=r,n.userNameRegEx=i.FieldParserAbstract.getFormFieldRegex("ff_username_regexp"),n.stringUtils=e.getService(e.ServiceType.StringUtils),n.isStrict?n.operations=[n.userNameLikeLabelOperation,n.uniqueEmailFieldOperation,n.userNameLikeAttributeOperation]:n.operations=[n.userNameLikeLabelOperation,n.singleTextFieldOperation,n.multipleTextFieldOperation,n.nearPasswordFieldOpeartion,n.existingUserNameOperation,n.uniqueEmailFieldOperation,n.userNameLikeAttributeOperation],n.operations=n.operations.map(function(e){return e.bind(n)}),n}return __extends(r,t),r.prototype.userNameLikeLabelOperation=function(e,t,r){if(this.userNameRegEx)for(var n=0,o=e.fields;n<o.length;n++){var s=o[n];if(i.FieldParserAbstract.regexMatches(this.userNameRegEx,s.label))return s.value}return null},r.prototype.userNameLikeAttributeOperation=function(t,r,i){for(var n=e.getService(e.ServiceType.StringUtils),o=0,s=r.uniqueTextValues;o<s.length;o++){var a=s[o],u=r.textFieldsByValue[a].field;if(n.stringContains(u.attributes.name,"user")||n.stringContains(u.id,"user"))return a}return null},r.prototype.singleTextFieldOperation=function(e,t,r){if(1===t.uniqueTextValues.length){var i=t.uniqueTextValues[0];return 2===t.textFieldsByValue[i].count&&(e.createAccountForm=!0),i}return null},r.prototype.multipleTextFieldOperation=function(e,t,r){for(var i=0,n=t.uniqueTextValues;i<n.length;i++){var o=n[i];if(t.textFieldsByValue[o].count>1)return e.createAccountForm=!0,o}return null},r.prototype.nearPasswordFieldOpeartion=function(e,t,r){for(var i=e.fields,n=1;n<i.length;++n)if("password"===i[n].type){var o=i[n-1];if("password"!==o.type)return o.value}return null},r.prototype.existingUserNameOperation=function(e,t,r){for(var i in g_sites)if(t.uniqueTextValues.indexOf(g_sites[i].unencryptedUsername)>-1)return g_sites[i].unencryptedUsername;return null},r.prototype.uniqueEmailFieldOperation=function(e,t,i){for(var n=[],o=0,s=t.uniqueTextValues;o<s.length;o++){var a=s[o],u=a.match(r.emailRegex);u&&1===u.length&&n.push(a)}return 1===n.length?n[0]:null},r.emailRegex=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/g,r}(i.FieldParserAbstract),i.UserNameFieldParser=n}(LPModule||(LPModule={})),function(e){var t,r;t=e.Services||(e.Services={}),r=function(){function e(){}return e.prototype.initialize=function(){},e.prototype.send=function(e,t){sendLpImprove(e,t)},e}(),t.SegmentService=r,t.register(e.ServiceType.Segment,r)}(LPModule||(LPModule={})),function(e){var t,r,i;t=e.Services||(e.Services={}),r=t.SiteParser||(t.SiteParser={}),i=function(){function e(){}return e.prototype.initialize=function(){},e.prototype.decrypt=function(e,t){return lpmdec_acct(t,!0,e,g_shares)},e.prototype.findMatchingSitePassword=function(e,t){Array.isArray(t)||(t=[t]);var r=t.indexOf(this.decrypt(e,e.password));if(-1===r&&e.fields&&e.fields.length>0)for(var i=0;i<e.fields.length;++i){var n=e.fields[i];if("password"===n.type&&(r=t.indexOf(this.decrypt(e,n.value)))>-1)break}return r>-1?t[r]:null},e.prototype.hasMatchingSiteUserName=function(e,t){if(!t)return!1;if(this.userNamesMatch(e.unencryptedUsername,t))return!0;if(e.fields&&e.fields.length)for(var r=0,i=e.fields;r<i.length;r++){var n=i[r];switch(n.type){case"text":case"email":case"tel":if(this.userNamesMatch(this.decrypt(e,n.value),t))return!0}}return!1},e.prototype.userNamesMatch=function(e,t){return e===t||this.userNameInEmail(e,t)||this.userNameInEmail(t,e)||this.isMaskedUsername(e,t)},e.prototype.userNameInEmail=function(e,t){if(t&&t.indexOf("@")>-1){var r=t.split("@");return 2===r.length&&e===r[0]}return!1},e.prototype.isMaskedUsername=function(e,t){return(t.indexOf("*")>-1||t.indexOf(String.fromCharCode(8226))>-1)&&e.length===t.length&&(e[0]===t[0]||e[e.length-1]===t[t.length-1])},e}(),r.SiteParserService=i,t.register(e.ServiceType.SiteParser,i)}(LPModule||(LPModule={})),function(e){var t,r;t=e.Services||(e.Services={}),r=function(){function e(){}return e.prototype.initialize=function(){},e.prototype.subscribe=function(e,t){Topics.get(e).subscribe(function(){return t()})},e}(),t.TopicService=r,t.register(e.ServiceType.Topic,r)}(LPModule||(LPModule={})),function(e){var t,r;t=e.Services||(e.Services={}),r=function(){function t(){var e=this;this.requests={},this.queries={},this.onBeforeRequestListener=function(t){e.shouldTrackRequest(t)&&(e.requests[t.requestId]=t)},this.onCompletedListener=function(t){var r=e.getMatchingQuery(t.requestId);r&&r.resolve(t.statusCode)},this.onErrorOccurredListener=function(t){var r=e.getMatchingQuery(t.requestId);r&&r.reject(t.error)},"undefined"!=typeof browser?this.webRequestApi=browser.webRequest:"undefined"!=typeof chrome&&(this.webRequestApi=chrome.webRequest)}return t.prototype.getResponse=function(t,r){var i=this;return this.isApiSupported()&&this.featureRepository.get(e.FeatureType.WebRequestTracking)?new Promise(function(e,n){return i.queries[t]={fields:r,resolve:e,reject:n}}):Promise.resolve(void 0)},t.prototype.isApiSupported=function(){return!!this.webRequestApi},t.prototype.shouldTrackRequest=function(e){return e.requestBody&&!e.requestBody.error&&(e.requestBody.formData||e.requestBody.raw)},t.prototype.takeRequest=function(e){if(!this.requests[e])return null;var t=this.requests[e];return delete this.requests[e],t},t.prototype.getMatchingQuery=function(e){var t=this.takeRequest(e);if(!t)return null;var r=this.queries[t.tabId];if(delete this.queries[t.tabId],r){for(var i=this.getSubmittedDataString(t),n=0;n<r.fields.length;++n)if(-1===i.indexOf(r.fields[n]))return null;return r}},t.prototype.getSubmittedDataString=function(e){return e.requestBody.formData?JSON.stringify(e.requestBody.formData):e.requestBody.raw.reduce(function(e,t){return e+String.fromCharCode.apply(null,new Uint8Array(t.bytes))},"")},t.prototype.initialize=function(){var t=this;this.featureRepository=e.getRepository(e.RepositoryType.Feature);var r=e.getService(e.ServiceType.Topic);r.subscribe(e.TopicType.LoginFinished,function(){return t.setup()}),r.subscribe(e.TopicType.ClearData,function(){return t.teardown()})},t.prototype.destroy=function(){this.teardown()},t.prototype.setup=function(){if(this.isApiSupported()&&this.featureRepository.get(e.FeatureType.WebRequestTracking)){var t={urls:["<all_urls>"],types:["xmlhttprequest","main_frame","sub_frame","other"]};this.webRequestApi.onBeforeRequest.addListener(this.onBeforeRequestListener,t,["requestBody"]),this.webRequestApi.onCompleted.addListener(this.onCompletedListener,t,null),this.webRequestApi.onErrorOccurred.addListener(this.onErrorOccurredListener,t)}},t.prototype.teardown=function(){this.isApiSupported()&&(this.webRequestApi.onBeforeRequest.removeListener(this.onBeforeRequestListener),this.webRequestApi.onCompleted.removeListener(this.onCompletedListener),this.webRequestApi.onErrorOccurred.removeListener(this.onErrorOccurredListener))},__decorate([e.Visible],t.prototype,"getResponse",null),__decorate([e.Visible],t.prototype,"isApiSupported",null),t}(),t.WebRequestService=r,t.register(e.ServiceType.WebRequest,r)}(LPModule||(LPModule={}));
//# sourceMappingURL=sourcemaps/modules-background.js.map
